<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pautacos - Artisanal Nigerian Fusion Cuisine</title>
    <meta name="description" content="Experience the pinnacle of Nigerian fusion cuisine at Pau Tacos. Serving artisanal tacos, exotic pepper soup, and more at university campuses in Lagos, Port Harcourt, and Abuja.">
    <meta name="keywords" content="Nigerian Tacos, Fusion Cuisine, Lagos Food, Abuja Restaurants, Port Harcourt Food, Campus Food, Pau Tacos, Artisanal Tacos, Exotic Pepper Soup">
    
    <!-- Social Share Preview -->
    <meta property="og:title" content="Pautacos - Artisanal Nigerian Fusion Cuisine" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://pautacos.com" />
    <meta property="og:image" content="https://pautacos.com/preview.png" />
    <meta property="og:image:width" content="1024" />
    <meta property="og:image:height" content="1536" />
    <meta property="og:description" content="Discover an elevated dining experience where authentic Nigerian flavors are masterfully fused with global culinary artistry." />
    <meta property="og:site_name" content="Pautacos" />
    <meta name="twitter:card" content="summary_large_image" />

    <link rel="icon" href="fulllogo.png" type="image/png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Playfair+Display:wght@700&family=Kalam:wght@400&display=swap" rel="stylesheet">
    <style>
        html {
    scroll-behavior: smooth;
}
body {
    font-family: 'Montserrat', sans-serif;
    background-color: #121212;
    color: #E0E0E0;
    transition: background-color 0.3s, color 0.3s;
}
body.light-mode {
    background-color: #fdf6e4;
    color: #333;
}
.font-playfair {
    font-family: 'Playfair Display', serif;
}
.font-kalam {
    font-family: 'Kalam', cursive;
}
.hero-section {
    position: relative;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    color: white;
    overflow: hidden;
}
.hero-video {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transform: translate(-50%, -50%);
    z-index: -2;
}
.hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(18, 18, 18, 0.8);
    z-index: -1;
}
.menu-card {
    background-color: rgba(26, 26, 26, 0.5);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: transform 0.4s ease, box-shadow 0.4s ease, background-color 0.3s, border-color 0.3s;
    display: flex;
    flex-direction: column;
    cursor: pointer;
}
body.light-mode .menu-card {
    background-color: rgba(255, 255, 255, 0.5);
    border-color: rgba(0,0,0,0.1);
}
.menu-card:hover {
    transform: translateY(-12px);
    box-shadow: 0 25px 50px -12px rgba(220, 38, 38, 0.2);
}
.location-card {
    background-size: cover;
    background-position: center;
    position: relative;
    overflow: hidden;
}
.location-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to top, rgba(0,0,0,0.9) 20%, rgba(0,0,0,0.1));
    transition: background 0.3s ease;
}
.exotics-section-bg {
    background-color: rgba(69, 10, 10, 0.5);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(220, 38, 38, 0.3);
    transition: background-color 0.3s, border-color 0.3s;
}
body.light-mode .exotics-section-bg {
    background-color: rgba(255, 235, 238, 0.5);
    border-color: rgba(220, 38, 38, 0.3);
}
.cta-button {
    transition: all 0.3s ease;
    background-color: #DC2626;
    color: #ffffff;
    letter-spacing: 1px;
}
.cta-button:hover {
    background-color: #EF4444;
    box-shadow: 0 10px 20px -5px rgba(220, 38, 38, 0.3);
}
.blur-button {
    background-color: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    transition: all 0.3s ease;
    padding: 0.75rem 1.5rem;
    border-radius: 9999px;
    font-weight: bold;
    display: inline-block;
    color: #ffffff;
}
.blur-button:hover {
    background-color: rgba(255, 255, 255, 0.2);
    border-color: rgba(255, 255, 255, 0.3);
}
.letter-modal-content.light .blur-button {
    background-color: rgba(0, 0, 0, 0.1);
    border-color: rgba(0, 0, 0, 0.2);
    color: #333;
}
.letter-modal-content.light .blur-button:hover {
    background-color: rgba(0, 0, 0, 0.2);
}
.text-brand-red {
    color: #DC2626;
}
header {
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}
header.scrolled {
    background-color: rgba(18, 18, 18, 0.95);
}
body.light-mode header.scrolled {
    background-color: rgba(253, 246, 228, 0.95);
}
.modal-backdrop {
    background-color: rgba(0,0,0,0.7);
}
.modal-content {
    max-height: 90vh;
}
.cart-modal-container {
    justify-content: flex-end;
}
.cart-modal-content {
    transform: translateX(100%);
    transition: transform 0.3s ease-out;
}
.cart-modal-container.active .cart-modal-content {
    transform: translateX(0);
}
.letter-modal-content {
    background-color: #fdf6e4;
    color: #333;
    border: 10px solid #c8bda8;
    transition: background-color 0.3s, color 0.3s, border-color 0.3s;
}
.letter-modal-content.dark {
    background-color: #1a1a1a;
    color: #E0E0E0;
    border-color: #333;
}
.aspect-2-3 {
    position: relative;
    width: 100%;
    padding-bottom: 150%;
}
.aspect-2-3 img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.scroll-hint {
    position: absolute;
    bottom: 2rem;
    left: 50%;
    transform: translateX(-50%);
    animation: bounce 2s infinite;
}
@media (max-width: 768px) {
    .scroll-hint {
        bottom: 6rem;
    }
}
@keyframes bounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateX(-50%) translateY(0);
    }
    40% {
        transform: translateX(-50%) translateY(-20px);
    }
    60% {
        transform: translateX(-50%) translateY(-10px);
    }
}
body.modal-open {
    overflow: hidden;
}

/* Scroll delegation from delivery section to cart items */
.cart-modal-content {
    overflow: hidden;
}

#cart-items-container {
    overflow-y: auto;
    max-height: none;
}

/* On mobile, make delivery section delegate scroll to cart items */
@media (max-width: 768px) {
    .cart-modal-content > div:last-child {
        overflow: hidden;
    }
}
/* Cart item hover effect only */
.cart-item {
    cursor: pointer;
    transition: background-color 0.2s;
}

.cart-item:hover {
    background-color: rgba(255, 255, 255, 0.05);
}

body.light-mode .cart-item:hover {
    background-color: rgba(0, 0, 0, 0.05);
}

/* Light mode section backgrounds */
body.light-mode #menu {
    background-color: #ffffff;
}
body.light-mode #locations {
    background-color: #f8f9fa;
}
body.light-mode #newsletter {
    background-color: #e9ecef;
}
body.light-mode #contact {
    background-color: #d6dbdf;
}

/* Light mode cart modal styles */
body.light-mode .cart-modal-content {
    background-color: #ffffff;
    color: #333;
}
body.light-mode .cart-modal-content h2 {
    color: #000 !important;
}
body.light-mode .cart-modal-content .border-gray-700 {
    border-color: #e5e7eb;
}
body.light-mode #cart-items-container {
    color: #333;
}
body.light-mode #cart-items-container h4 {
    color: #000 !important;
}
body.light-mode #customer-name,
body.light-mode #customer-phone,
body.light-mode #pickup-spot,
body.light-mode #campus-selector-trigger {
    background-color: #f8f9fa;
    color: #333;
    border-color: #d1d5db;
}
body.light-mode .cart-modal-content label {
    color: #000 !important;
}

/* Light mode order modal styles */
body.light-mode .modal-content {
    background-color: #ffffff;
    color: #333;
}
body.light-mode .modal-content input[type="checkbox"],
body.light-mode .modal-content input[type="radio"] {
    background-color: #f8f9fa;
    border-color: #d1d5db;
}
body.light-mode .modal-content label {
    background-color: #f8f9fa !important;
    border-color: #d1d5db !important;
}
body.light-mode .modal-content label span {
    color: #333 !important;
}
body.light-mode .modal-content h2 {
    color: #000 !important;
}
body.light-mode .modal-content h3 {
    color: #DC2626 !important;
}

/* Red checkboxes for both modes */
.modal-content input[type="checkbox"] {
    accent-color: #DC2626 !important;
}
.modal-content input[type="checkbox"]:checked {
    background-color: #DC2626 !important;
    border-color: #DC2626 !important;
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='m13.854 3.646-7.5 7.5a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6 10.293l7.146-7.147a.5.5 0 0 1 .708.708z'/%3e%3c/svg%3e") !important;
}
.modal-content input[type="checkbox"]:focus {
    box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.2) !important;
    border-color: #DC2626 !important;
}
.modal-content .form-checkbox:checked {
    background-color: #DC2626 !important;
    border-color: #DC2626 !important;
}

/* Light mode product titles */
body.light-mode .menu-card h3 {
    color: #000 !important;
}
body.light-mode .exotic-card h3 {
    color: #000 !important;
}
body.light-mode .exotics-section-bg h2 {
    color: #000 !important;
}
body.light-mode .exotic-card p {
    color: #374151 !important;
}
body.light-mode .exotics-section-bg p {
    color: #374151 !important;
}

/* Light mode header icons */
body.light-mode #cart-button,
body.light-mode #theme-toggle {
    color: #fff;
}
body.light-mode header.scrolled #cart-button,
body.light-mode header.scrolled #theme-toggle {
    color: #000 !important;
}

/* Force location names to stay white in both modes */
body.light-mode .location-card h3 {
    color: #fff !important;
}

/* Light mode newsletter section */
body.light-mode #newsletter h2 {
    color: #000 !important;
}
body.light-mode #newsletter p {
    color: #374151 !important;
}

/* Draft Email Modal Styles */
.form-input {
    background-color: transparent;
    border: none;
    border-bottom: 1px solid #6B7280;
    border-radius: 0;
    padding: 1rem 0;
    font-size: 1.125rem;
    transition: border-color 0.3s;
}
.form-input:focus {
    background-color: transparent;
    border-color: #FFFFFF;
    outline: none;
}
.form-input::placeholder { 
    color: #9CA3AF; 
}
.btn-primary {
    background-color: transparent;
    color: #FFFFFF;
    border: 1px solid #FFFFFF;
    transition: all 0.3s;
}
.btn-primary:hover {
    background-color: #FFFFFF;
    color: #000000;
}
#draft-email-modal { 
    backdrop-filter: blur(8px); 
}
.form-field {
    opacity: 0;
    max-height: 0;
    overflow: hidden;
    transition: all 0.5s ease-in-out;
    transform: translateY(-10px);
    margin-bottom: 0;
    padding: 0;
}
.form-field.active {
    opacity: 1;
    max-height: 100px;
    transform: translateY(0);
    margin-bottom: 1.5rem;
    padding: 0;
}
#email-message-field.active { 
    max-height: 140px; 
}
#email-urgency-field.active { 
    max-height: 180px; 
}
#email-submit-field.active { 
    max-height: 80px; 
}

/* Light mode draft email modal */
body.light-mode #draft-email-container {
    background-color: #ffffff;
    border-color: #e5e7eb;
}
body.light-mode #draft-email-container h2 {
    color: #000 !important;
}
body.light-mode #draft-email-container .text-white {
    color: #333 !important;
}
body.light-mode .form-input {
    color: #333;
    border-color: #9CA3AF;
}
body.light-mode .form-input:focus {
    border-color: #000000;
}
body.light-mode .form-input::placeholder {
    color: #6B7280;
}
body.light-mode .btn-primary {
    color: #000000;
    border-color: #000000;
}
body.light-mode .btn-primary:hover {
    background-color: #000000;
    color: #ffffff;
}
body.light-mode .urgency-option {
    border-color: #d1d5db;
    color: #333;
}
body.light-mode .urgency-option:hover {
    border-color: #000000;
}
body.light-mode .urgency-option.border-white {
    border-color: #000000 !important;
    background-color: #f3f4f6 !important;
}
body.light-mode .urgency-option .text-white {
    color: #333 !important;
}
body.light-mode #phone-error {
    color: #dc2626;
}
body.light-mode #close-draft-modal-btn {
    color: #6B7280;
}
body.light-mode #close-draft-modal-btn:hover {
    color: #000000;
}

/* Light mode footer styles */
body.light-mode footer {
    background-color: #f8f9fa;
    border-color: #e5e7eb;
}
body.light-mode footer .backdrop-blur-lg {
    background-color: rgba(255, 255, 255, 0.2);
    border-color: rgba(0, 0, 0, 0.1);
}
body.light-mode footer h2 {
    color: #000 !important;
}
body.light-mode footer p:not(.text-gray-500) {
    color: #374151 !important;
}
body.light-mode footer .text-white {
    color: #000 !important;
}
body.light-mode footer .w-12.h-12 {
    background-color: rgba(0, 0, 0, 0.05);
    border-color: rgba(0, 0, 0, 0.1);
}
body.light-mode footer .w-12.h-12:hover {
    border-color: rgba(220, 38, 38, 0.5);
    background-color: rgba(220, 38, 38, 0.1);
}
body.light-mode #draft-email-btn {
    border-color: #000000;
    color: #000000;
}
body.light-mode #draft-email-btn:hover {
    background-color: #000000;
    color: #ffffff;
}

/* Light mode campus selector styles */
body.light-mode #campus-list-container h3 {
    color: #DC2626 !important; /* Keep city headers red */
}

body.light-mode #campus-list-container .text-gray-300 {
    color: #333 !important;
}

body.light-mode #campus-list-container div[data-campus] {
    color: #333 !important;
}

body.light-mode #campus-list-container div[data-campus]:hover {
    background-color: rgba(0, 0, 0, 0.05) !important;
    color: #000 !important;
}

body.light-mode #campus-modal .modal-content {
    background-color: #ffffff;
    color: #333;
}

body.light-mode #campus-modal .modal-content h2 {
    color: #000 !important;
}
/* Campus selector text colors */
body.light-mode #selected-campus-text {
    color: #000 !important;
}

body.light-mode #selected-campus-text.text-black {
    color: #000 !important;
}

#selected-campus-text.text-white {
    color: #fff !important;
}
.step-container {
    opacity: 0;
    max-height: 0;
    overflow: hidden;
    transition: all 0.3s ease;
    margin-bottom: 0;
}

.step-container.visible {
    opacity: 1;
    max-height: 200px;
    margin-bottom: 1rem;
}

.step-container.active input,
.step-container.active textarea {
    border-color: #DC2626;
}

.step-container.completed input,
.step-container.completed textarea {
    border-color: #DC2626;
    background-color: rgba(220, 38, 38, 0.1);
}

.step-container.completed label {
    color: #DC2626 !important;
}

.step-container.completed .text-gray-500 {
    display: none;
}

/* Light mode support for completed fields */
body.light-mode .step-container.completed input,
body.light-mode .step-container.completed textarea {
    border-color: #DC2626;
    background-color: rgba(220, 38, 38, 0.1);
    color: #333;
}

body.light-mode .step-container.completed label {
    color: #DC2626 !important;
}

/* Make completed steps clickable */
.step-container.completed {
    cursor: pointer;
}

.step-container.completed:hover {
    background-color: rgba(220, 38, 38, 0.05);
}

body.light-mode .step-container.completed:hover {
    background-color: rgba(220, 38, 38, 0.05);
}
    </style>
</head>
<body>

    <!-- Header -->
    <header id="header" class="bg-transparent fixed top-0 w-full z-50 transition-colors duration-300">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" class="flex items-center">
                <img src="logo.png" alt="Pau Tacos Logo - Artisanal Nigerian Tacos" class="h-20 w-20" onerror="this.onerror=null;this.src='https://placehold.co/80x80/DC2626/ffffff?text=PT';">
            </a>
            <div class="flex items-center space-x-4">
                 <!-- Cart Icon -->
                <button id="cart-button" class="relative text-white">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg>
                    <span id="cart-count" class="absolute -top-2 -right-2 bg-red-600 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">0</span>
                </button>
                <!-- Theme Toggle -->
                <button id="theme-toggle" class="text-white"></button>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="hero-overlay"></div>
        <video autoplay loop muted playsinline class="hero-video">
            <source src="hero.mov" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div class="container mx-auto px-6 relative">
            <h1 class="font-playfair text-5xl md:text-7xl font-bold mb-6 leading-tight">A Symphony of Spice & Tradition</h1>
            <p class="text-lg md:text-xl mb-10 max-w-3xl mx-auto text-gray-300">Chim's Curated Collection of Sophisticated Culinary Artistry, Unprecedented in Nigeria.</p>
        </div>
        <a href="#menu" class="scroll-hint">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
        </a>
    </section>

    <!-- Menu Section -->
    <section id="menu" class="py-24 bg-[#121212] transition-colors duration-300">
        <div class="container mx-auto px-6">
            <h2 class="font-playfair text-5xl md:text-6xl font-bold text-center mb-16">The <span class="text-brand-red">Artisanal</span> Collection</h2>
            <div id="menu-items" class="grid grid-cols-2 lg:grid-cols-3 gap-4 md:gap-12">
                <!-- Menu items will be dynamically injected here by JavaScript -->
            </div>
            
            <!-- Exotics Section -->
            <div class="mt-24 exotics-section-bg rounded-2xl p-8 md:p-16">
                 <h2 class="font-playfair text-5xl md:text-6xl font-bold text-center mb-6 text-white">The <span class="text-red-400">Exotics</span></h2>
                 <p class="text-center text-gray-300 max-w-2xl mx-auto mb-12">A curated selection of rare delicacies, available only on Mystery Days. Inquire within for availability.</p>
                 <div id="exotics-container" class="grid grid-cols-1 md:grid-cols-2 gap-12 max-w-4xl mx-auto">
                    <!-- Exotic items will be dynamically injected here -->
                 </div>
            </div>
        </div>
    </section>

    <!-- Locations Section -->
    <section id="locations" class="bg-[#181818] py-24 transition-colors duration-300">
        <div class="container mx-auto px-6">
            <h2 class="font-playfair text-5xl md:text-6xl font-bold text-center mb-16">Our <span class="text-brand-red">Locations</span></h2>
            <div id="locations-container" class="grid grid-cols-1 md:grid-cols-3 gap-10">
                <!-- Location cards will be dynamically injected here -->
            </div>
        </div>
    </section>
    
<!-- Unified Footer Section -->
<footer class="bg-[#0a0a0a] border-t border-gray-800 py-20 transition-colors duration-300">
    <div class="container mx-auto px-6">
        <!-- Main Footer Content -->
        <div class="backdrop-blur-lg bg-black/20 border border-gray-800/50 rounded-3xl p-12">
            <!-- Newsletter Section -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <div>
                    <h2 class="font-playfair text-4xl lg:text-5xl font-bold text-white mb-6">
                        Receive the <span class="text-brand-red">Huntsman's</span> Letters
                    </h2>
                    <p class="text-gray-500 text-sm mb-8">
                        A <a href="https://fromsupply.com" target="_blank" class="text-brand-red hover:text-red-400 transition-colors font-medium">fromsupply Mall</a> brand, 
                        In <a href="https://chimwopara.com" target="_blank" class="text-brand-red hover:text-red-400 transition-colors font-medium">Chim Wopara Enterprises</a>
                    </p>
                    <p class="text-gray-400 text-lg mb-8">
                        Be the first to know when our Exotic selections arrive. Subscribe for exclusive updates and tales from the wild.
                    </p>
                    
                    <!-- Website Info -->
                    <div class="mb-6">
                        <p class="text-xl font-playfair text-white mb-2">pautacos.com</p>
                        <p class="text-gray-500 text-sm mb-2">Pautacos may outsource recipes, ingerdients or meals to deliver with speed.</p>
                        <p class="text-gray-500 text-sm mb-6">&copy; 2025 PauTacos. All Rights Reserved.</p>
                    </div>
                    
                    <!-- Draft Email Button with Social Media inline -->
                    <div class="flex items-center space-x-4">
                        <button id="draft-email-btn" class="bg-transparent border border-white text-white px-6 py-3 rounded-lg font-medium hover:bg-white hover:text-black transition-all duration-300">
                            Draft Email
                        </button>
                        
                        <!-- Social Media Icons - Natural shapes -->
                        <a href="https://www.tiktok.com/@fromsupply" target="_blank" class="group">
                            <div class="p-2 bg-gray-800/50 backdrop-blur border border-gray-700/50 rounded-lg flex items-center justify-center group-hover:border-brand-red/50 group-hover:bg-brand-red/10 transition-all duration-300">
                                <svg class="w-6 h-6 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/>
                                </svg>
                            </div>
                        </a>
                        
                        <a href="https://www.instagram.com/fromsupply" target="_blank" class="group">
    <div class="p-2 bg-gray-800/50 backdrop-blur border border-gray-700/50 rounded-lg flex items-center justify-center group-hover:border-brand-red/50 group-hover:bg-brand-red/10 transition-all duration-300">
        <svg class="w-6 h-6 group-hover:scale-110 transition-transform text-white" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
            <path fill-rule="evenodd" d="M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.024.06 1.378.06 3.808s-.012 2.784-.06 3.808c-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.024.048-1.378.06-3.808.06s-2.784-.013-3.808-.06c-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.048-1.024-.06-1.378-.06-3.808s.012-2.784.06-3.808c.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 016.345 2.525c.636-.247 1.363-.416 2.427-.465C9.793 2.013 10.147 2 12.315 2zm-1.161 1.043c-1.06.048-1.693.212-2.22.427a3.41 3.41 0 00-1.226.825 3.41 3.41 0 00-.825 1.226c-.215.527-.379 1.16-.427 2.22-.048 1.04-.06 1.358-.06 3.64s.012 2.6.06 3.64c.048 1.06.212 1.693.427 2.22a3.41 3.41 0 00.825 1.226 3.41 3.41 0 001.226.825c.527.215 1.16.379 2.22.427 1.04.048 1.358.06 3.64.06s2.6-.012 3.64-.06c1.06-.048 1.693-.212 2.22-.427a3.41 3.41 0 001.226-.825 3.41 3.41 0 00.825-1.226c.215-.527.379-1.16.427-2.22.048-1.04.06-1.358.06-3.64s-.012-2.6-.06-3.64c-.048-1.06-.212-1.693-.427-2.22a3.41 3.41 0 00-.825-1.226 3.41 3.41 0 00-1.226-.825c-.527-.215-1.16-.379-2.22-.427-1.04-.048-1.358-.06-3.64-.06zM12 6.865a5.135 5.135 0 100 10.27 5.135 5.135 0 000-10.27zm0 8.468a3.333 3.333 0 110-6.666 3.333 3.333 0 010 6.666zm5.338-9.87a1.2 1.2 0 100 2.4 1.2 1.2 0 000-2.4z" clip-rule="evenodd"/>
        </svg>
    </div>
</a>
                    </div>
                </div>
                
                <div class="flex flex-col justify-start items-end">
                    <div class="sender-form-field w-full" data-sender-form-id="b68xOn"></div>
                </div>
            </div>
        </div>
    </div>
</footer>

    <!-- Order Modal -->
    <div id="order-modal" class="fixed inset-0 z-50 items-center justify-center hidden">
        <div class="modal-backdrop absolute inset-0"></div>
        <div class="modal-content bg-[#1a1a1a] rounded-lg shadow-xl w-11/12 md:max-w-2xl mx-auto relative p-8 overflow-y-auto">
            <!-- Modal content will be injected here -->
        </div>
    </div>

    <!-- Cart Modal -->
    <div id="cart-modal" class="fixed inset-0 z-50 flex items-start justify-end hidden p-4 md:p-8 cart-modal-container">
        <div class="modal-backdrop absolute inset-0"></div>
        <div class="cart-modal-content bg-[#1a1a1a] rounded-lg shadow-xl w-full max-w-md relative h-full flex flex-col">
     <div class="p-6 flex justify-between items-center border-b border-gray-700">
        <h2 class="font-playfair text-2xl text-white">Your Box</h2>
        <button id="close-cart-modal" class="text-gray-400 hover:text-white text-3xl">&times;</button>
     </div>
     <div id="cart-items-container" class="p-6 flex-grow overflow-y-auto">
        <!-- Cart items will be here -->
     </div>
     <div class="p-6 border-t border-gray-700">
    <div class="space-y-4">
        <!-- Step 1: Name -->
        <div id="name-step" class="step-container visible active">
            <label for="customer-name" class="block mb-2 text-sm font-semibold text-gray-300">Your Name</label>
            <input type="text" id="customer-name" class="w-full bg-[#2a2a2a] text-white p-3 rounded-lg border border-gray-600 focus:outline-none focus:border-red-500" placeholder="e.g. Chim Wopara">
            <p class="text-xs text-gray-500 mt-1">Press Enter to continue</p>
        </div>
        
        <!-- Step 2: Phone -->
        <div id="phone-step" class="step-container">
            <label for="customer-phone" class="block mb-2 text-sm font-semibold text-gray-300">Phone Number</label>
            <input type="tel" id="customer-phone" class="w-full bg-[#2a2a2a] text-white p-3 rounded-lg border border-gray-600 focus:outline-none focus:border-red-500" placeholder="e.g. 08012345678">
            <p class="text-xs text-gray-500 mt-1">Press Enter to continue</p>
        </div>
        
        <!-- Step 3: Pickup Spot -->
        <div id="pickup-step" class="step-container">
            <label for="pickup-spot" class="block mb-2 text-sm font-semibold text-gray-300">Pickup Spot Address</label>
            <textarea id="pickup-spot" rows="2" class="w-full bg-[#2a2a2a] text-white p-3 rounded-lg border border-gray-600 focus:outline-none focus:border-red-500" placeholder="e.g. In front of the library"></textarea>
            <p class="text-xs text-gray-500 mt-1">Press Enter to continue (optional)</p>
        </div>
        
        <!-- Step 4: Campus (Optional) -->
        <div id="campus-step" class="step-container">
            <label class="block mb-2 font-semibold text-gray-300">Select Your Campus (Optional)</label>
            <div id="campus-selector-trigger" class="w-full bg-[#2a2a2a] text-white p-3 rounded-lg border border-gray-600 cursor-pointer flex justify-between items-center">
                <span id="selected-campus-text" class="text-gray-400">No Campus</span>
                <svg class="w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
            </div>
            <input type="hidden" id="campus-select-input" name="campus" value="No Campus">
        </div>
    </div>
    <button id="buy-now-button" class="cta-button w-full font-bold py-4 mt-6 rounded-full text-lg hidden">BUY NOW</button>
</div>
</div>
    </div>

    <!-- Campus Selector Modal -->
    <div id="campus-modal" class="fixed inset-0 z-[60] items-center justify-center hidden">
        <div class="modal-backdrop absolute inset-0"></div>
        <div class="modal-content bg-[#1a1a1a] rounded-lg shadow-xl w-11/12 md:max-w-xl mx-auto relative p-8 overflow-y-auto">
            <button id="close-campus-modal" class="absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
            <h2 class="font-playfair text-3xl text-white mb-6">Select a Campus</h2>
            <div id="campus-list-container" class="space-y-4">
                <!-- Campuses will be injected here -->
            </div>
        </div>
    </div>
    
    <!-- Note/Lure Modal -->
    <div id="note-modal" class="fixed inset-0 z-[60] items-center justify-center hidden">
        <div class="modal-backdrop absolute inset-0"></div>
        <div id="note-content" class="modal-content letter-modal-content rounded-lg shadow-xl w-11/12 md:max-w-lg mx-auto relative p-8">
            <!-- Letter content will be injected here -->
        </div>
    </div>
    <!-- Draft Email Modal -->
<div id="draft-email-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 z-[70] flex items-center justify-center p-4">
    <div id="draft-email-container" class="bg-[#1a1a1a] border border-gray-700 rounded-xl p-6 max-w-3xl w-full relative">
        <div class="flex justify-between items-center mb-8">
            <h2 class="text-3xl font-bold text-white">Draft Email</h2>
            <button id="close-draft-modal-btn" class="text-gray-400 hover:text-white">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
        </div>
        <form id="email-draft-form" class="max-w-2xl mx-auto">
            <div id="email-form-success" class="hidden text-white p-4 rounded-lg mb-6 text-center"></div>
            <div class="form-field active" id="email-name-field">
                <input type="text" id="email-name" name="name" placeholder="What's your full name?" class="form-input w-full text-white" required>
            </div>
            <div class="form-field" id="email-email-field">
                <input type="email" id="email-email" name="email" placeholder="What's your email address?" class="form-input w-full text-white" required>
            </div>
            <div class="form-field" id="email-phone-field">
                <input type="tel" id="email-phone" name="phone" placeholder="Enter phone number" class="form-input w-full text-white" required>
                <div id="phone-error" class="hidden text-red-400 text-sm mt-1">Please enter at least 10 digits</div>
            </div>
            <div class="form-field" id="email-message-field">
                <textarea id="email-message" name="message" rows="4" placeholder="How can we help you?" class="form-input w-full text-white resize-none" required></textarea>
            </div>
            <div class="form-field" id="email-urgency-field">
                <div class="mb-4">
                    <label class="text-white text-sm mb-3 block">What is the nature of this email?</label>
                    <div class="grid grid-cols-3 gap-3">
                        <button type="button" class="urgency-option p-3 border border-gray-600 rounded-lg text-center transition-all hover:border-white" data-urgency="Gratitude">
                            <div class="text-sm font-medium text-white">Gratitude</div>
                        </button>
                        <button type="button" class="urgency-option p-3 border border-gray-600 rounded-lg text-center transition-all hover:border-white" data-urgency="Suggestion">
                            <div class="text-sm font-medium text-white">Suggestion</div>
                        </button>
                        <button type="button" class="urgency-option p-3 border border-gray-600 rounded-lg text-center transition-all hover:border-white" data-urgency="Complaint">
                            <div class="text-sm font-medium text-white">Complaint</div>
                        </button>
                    </div>
                </div>
            </div>
            <div class="form-field" id="email-submit-field">
                <button type="button" id="draft-email-submit-btn" class="btn-primary font-medium py-3 px-8 rounded-lg mt-6 w-full">Open in Mail App</button>
            </div>
        </form>
    </div>
</div>

    <script>
      (function (s, e, n, d, er) {
        s['Sender'] = er;
        s[er] = s[er] || function () {
          (s[er].q = s[er].q || []).push(arguments)
        }, s[er].l = 1 * new Date();
        var a = e.createElement(n),
            m = e.getElementsByTagName(n)[0];
        a.async = 1;
        a.src = d;
        m.parentNode.insertBefore(a, m)
      })(window, document, 'script', 'https://cdn.sender.net/accounts_resources/universal.js', 'sender');
      sender('722cce33374677')
    </script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- DATA ---
            const savoryToppings = ['Caramelized Onions', 'Smoked Suya', 'Yaji Spice Dust', 'Kilishi Jerky', 'Crispy Fried Egg', 'Hard-Boiled Egg', 'Sweet Plantain', 'Smoked Sardine', 'Grilled Shrimp', 'Creamy Mayonnaise', 'Classic Ketchup', 'Smoky BBQ Sauce', 'Grilled Steak', 'Suya Chicken', 'Spiced Beef', 'Akara Fritter', 'Roasted Corn', 'Crisp Lettuce', 'Fresh Spinach', 'Shredded Cabbage', 'Julienned Carrot'];
            const burgerToppings = [...savoryToppings, 'More Meat'];
            const sweetToppings = ['White Chocolate Curls', 'Dark Chocolate Shavings', 'Milk Chocolate Chunks', 'Snickers Pieces', "M&M's", 'Smarties', 'Crushed Oreos', 'Fresh Banana Blend', 'Spiced Apple Blend'];
            const pancakeToppings = ['Maple Syrup', 'Honey', 'Chocolate Sauce', 'Fresh Berries', 'Whipped Cream'];
            const moiMoiToppings = ['Smoked Sardine', 'Hard-Boiled Egg', 'Corned Beef'];
            const friesToppings = ['Yaji Spice Dust', 'Ketchup', 'Mayonnaise', 'Smoky BBQ Sauce'];

            const menuData = {
                taco: { 
                    name: 'The Beloved Taco',
                    image: 'taco.png',
                    prices: { big: 5000, bigger: 8000, biggest: 10000 },
                    toppings: savoryToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">They say you can't improve on a classic. I disagree. This recipe was born from a dozen late-night arguments in a Lagos kitchen, a quest to find the perfect balance between the familiar and the divine. Each spice was chosen not just for its taste, but for the story it tells. This isn't just a taco. It's a conversation; a taste of home, whispered in a new language.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                burrito: { 
                    name: 'The Obese Burrito',
                    image: 'burrito.png',
                    prices: { big: 6000, bigger: 9000, biggest: 12000 },
                    toppings: savoryToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">We were told it was impossible. "Too much," they said. "It cannot be contained." We saw it as a challenge. This burrito is an architectural marvel, a testament to pure ambition. We layered flavors like a master weaver, ensuring every single bite is a journey through a landscape of taste. It is a feast in your hands, an experience that demands your full attention. I dare you to conquer it.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                poutine: { 
                    name: 'The Montreal Poutine',
                    image: 'poutine.png',
                    prices: { big: 10000, bigger: 16000, biggest: 20000 },
                    toppings: savoryToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">A message arrived on a cold wind from the North, a recipe scrawled on birch bark. It spoke of fries, curds, and gravy. We honored the tradition, but we could not ignore the call of our own spices. We introduced the warmth of the Sahara to the chill of the Canadian winter. The result is a culinary dialogue between two worlds, a comforting dish that tells a story of unexpected friendship.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                pizza: {
                    name: 'The Italian Special',
                    image: 'pizza.png',
                    prices: { big: 7000, bigger: 10000, biggest: 13000 },
                    toppings: savoryToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">An Italian classic, kidnapped and brought to a bustling Lagos market. We showed it our spices, our smoke, our fire. It resisted at first, but then it understood. On a bed of hand-stretched dough, Italian tradition and Nigerian audacity dance together. Topped with Suya, Yaji, and our secret sauce, it's a pizza that speaks with a bold new accent.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                 burger: {
                    name: 'The BBL Burger',
                    image: 'burger.png',
                    prices: { big: 6000, bigger: 9000, biggest: 12000 },
                    toppings: burgerToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">This is not a burger. This is architecture. A tower of flavor, engineered for maximum satisfaction. We flame-grill the patty to seal in the juices, then build upon that foundation with layers of texture and taste. It's a handful of happiness, a monument to the art of the grill.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                 spaghetti: {
                    name: 'The Strands della Foresta',
                    image: 'spaghetti.png',
                    prices: { big: 5500, bigger: 8500, biggest: 11000 },
                    toppings: savoryToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">A recipe found in a journal from a traveler who got lost in the deep woods of Italy, only to be saved by a Nigerian chef. A fusion of rich, slow-cooked tomato sauce and the smoky, spicy notes of the motherland. Each strand tells a story of survival and delicious discovery, a testament to the unexpected bonds forged over a shared meal.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                shawarma: {
                    name: 'The Midnight Shawarma',
                    image: 'shawarma.png',
                    prices: { big: 4500, bigger: 6500, biggest: 8500 },
                    toppings: savoryToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">Learned from a master on a bustling street corner, under a sky of a thousand stars. The secret isn't just the spice, but the patience of the flame. Slow-roasted, hand-carved, and wrapped with reverence. This is the taste of a thousand and one late nights, a story of savory satisfaction told in every single bite.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                jollof: {
                    name: "Chim's Smokey Jollof",
                    image: 'jollofrice.png',
                    prices: { big: 4000, bigger: 6000, biggest: 8000 },
                    toppings: savoryToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">This isn't just rice. It's a statement. It's the heart of the party, the soul of every gathering. My recipe is a closely guarded secret, passed down through generations who understood the sacred geometry of smoke, tomato, and spice. Each grain is infused with history and flavor. To taste it is to understand.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                friedrice: {
                    name: 'The Chinese Stir Fry Rice',
                    image: 'friedrice.png',
                    prices: { big: 4000, bigger: 6000, biggest: 8000 },
                    toppings: savoryToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">We sought the most vibrant greens, the most crisp vegetables from a hidden market known only to the city's finest chefs. This dish is a celebration of freshness, a festival of color and crunch. Each ingredient is flash-fried in a searing wok to lock in its essence, creating a light yet deeply satisfying experience that dances on the palate.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                pancakes: {
                    name: 'The Sunrise Pancake Stack',
                    image: 'pancake.png',
                    prices: { big: 3000, bigger: 4500, biggest: 6000 },
                    toppings: pancakeToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">Found in a grandmother's faded notebook, the recipe simply said: "Patience, good butter, and a happy heart." We follow it to the letter. These aren't just mixed, they're coaxed. Rested, then griddled until they are impossibly fluffy and golden. They are comfort, pure and simple, a warm hug on a plate.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                moimoi: {
                    name: 'The Velvet Moi Moi',
                    image: 'moimoi.png',
                    prices: { big: 2500, bigger: 4000, biggest: 5500 },
                    toppings: moiMoiToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">The art of Moi Moi is the art of transformation. Taking the humble bean and turning it into something ethereal and smooth. Ours is steamed slowly, patiently, in seasoned leaves that impart a subtle, earthy aroma. It is a delicate process that results in a savory pudding of unparalleled texture. A true taste of Nigerian culinary grace.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                fries: {
                    name: 'The Perfectly frenched Potatoes',
                    image: 'fries.png',
                    prices: { big: 2000, bigger: 3000, biggest: 4000 },
                    toppings: friesToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">The quest for the perfect fry is a noble one. It led us to fields where the soil is rich and the potatoes are proud. We cut them by hand, blanch them twice for that fluffy interior and shatteringly crisp exterior. A sprinkle of sea salt is all they need to sing. Simple perfection is the ultimate luxury.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                milkshake: { 
                    name: 'The Perfectly Creamed Milkshake',
                    image: 'milkshake.png',
                    prices: { big: 2000, bigger: 3000, biggest: 4000 },
                    toppings: sweetToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">The secret is in the churn. Not too fast, not too slow. A rhythm passed down from a forgotten artisan who believed that texture was a form of magic. We use only the purest cream and the most decadent inclusions, blending them until they reach a state of liquid silk. It is more than a drink; it is a moment of pure, unadulterated bliss.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                boba: { 
                    name: 'The Taiwanese Original Boba',
                    image: 'boba.png',
                    prices: { big: 2000, bigger: 3000, biggest: 4000 },
                    toppings: sweetToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">From a bustling night market in Taipei, a recipe was carried across oceans. It wasn't written down, but rememberedâ€"a precise balance of tea, milk, and the perfect 'Q' of the pearl. We brew our tea in small, dedicated batches, ensuring every cup carries the authentic, fragrant soul of its origin. The pearls are prepared hourly, their texture a testament to our dedication.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                lassi: { 
                    name: 'The Famous Indian Yoghurt',
                    image: 'lassi.png',
                    prices: { big: 2000, bigger: 3000, biggest: 4000 },
                    toppings: sweetToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">A gift from the kitchens of Rajasthan, where this drink is more than refreshmentâ€"it's a remedy for the desert heat, a balm for the soul. We use a special culture of yoghurt, churned by hand until it reaches a state of impossible smoothness. It is then kissed with fruit and spice, a perfect harmony of tart and sweet.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                coleslaw: {
                    name: 'The Classic Creamy Slaw',
                    image: 'coleslaw.png',
                    prices: { big: 1500, bigger: 2500, biggest: 3500 },
                    toppings: [],
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">A cherished family recipe for sunny days and big gatherings. The secret isn't in what you add, but what you don't. Crisp, fresh vegetables, a dressing that's both creamy and light, with just a hint of tang. It's the perfect, cooling counterpoint to a feast of spice. A moment of pure, crunchy refreshment.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                macaronisalad: {
                    name: 'The Picnic Macaroni Salad',
                    image: 'macsalad.png',
                    prices: { big: 2000, bigger: 3000, biggest: 4000 },
                    toppings: [],
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">This is the taste of laughter and shared blankets under a shady tree. A simple pleasure, elevated to an art form. Tender pasta, crisp vegetables, and a dressing that sings with a sweet, tangy harmony. It's comfort food that reminds you of the best of days.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                chinchin: {
                    name: "The Ancestor's Chin Chin",
                    image: 'chinchin.png',
                    prices: { big: 1500, bigger: 2500, biggest: 3500 },
                    toppings: [],
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">A recipe whispered by the harmattan wind, a thousand tiny, crunchy pieces of joy. Each one is a memory of celebration, fried to a perfect golden crisp. It's the sound of happiness in a bowl, a taste of pure nostalgia.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                coffee: {
                    name: 'The Jos Plateau Coffee',
                    image: 'coffee.png',
                    prices: { big: 2000, bigger: 3000, biggest: 4000 },
                    toppings: sweetToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">Sourced from the misty highlands where the air is cool and the soil is rich. These beans are hand-picked at dawn, roasted slowly to unlock notes of earth and chocolate. This is not just a drink to wake you up; it's a drink that awakens your soul to the beauty of the morning.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                cookie: {
                    name: "Cookie Monster's Stash",
                    image: 'cookie.png',
                    prices: { big: 1500, bigger: 2500, biggest: 3500 },
                    toppings: [],
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">We embarked on a quest for the perfect cookie. It required melting Belgian chocolate under a full moon and using butter churned only to the sound of Afrobeats. The result is a cookie with crisp edges, a gooey center, and a story in every chunk. It's a secret worth keeping.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                cupcake: {
                    name: 'The Cloud-Kissed Cupcake',
                    image: 'cupcake.png',
                    prices: { big: 2000, bigger: 3500, biggest: 5000 },
                    toppings: [],
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">An architect and a baker fell in love. This was their creation. A foundation of impossibly light cake and a spire of ethereal frosting. It is a tiny tower of sweetness, a testament to the fact that the best things are built with passion and a touch of whimsy.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                },
                icecream: {
                    name: "Sweet Northern Glacier",
                    image: 'icecream.png',
                    prices: { big: 2500, bigger: 4000, biggest: 5500 },
                    toppings: sweetToppings,
                    letter: `<p class="mb-4">To my trusted reader,</p><p class="mb-4">Our ice cream is not made, it is composed. We churn it slowly, in frozen marble bowls, allowing the cream to develop a dense, luxurious texture that machines can only dream of. Each scoop is a testament to the beauty of simple, perfect ingredients, a cool whisper on a hot day.</p><p class="text-right mt-6">Chim</p>{{SIGNATURE}}`
                }
            };

            
            
            const exoticsData = {
                peppersoup: {
                    name: 'Exotic Pepper Soup',
                    description: 'Featuring rare ingredients like Snake, Crocodile, and Snail. Price upon request.',
                    image: 'peppersoup.png',
                    alt: 'Exotic Pepper Soup Selection',
                    letter: `
                        <p class="mb-4">To Chim,</p>
                        <p class="mb-4">The river hunt was a success. The ancient specimen we sought, the one they call the "River Guardian," put up a legendary fight, but our efforts paid off. Its primal heat will make for a pepper soup of unparalleled potency.</p>
                        <p class="mb-4">We're moving under the cover of night, the cargo is secure. The whispers of the mangrove are behind us. Expect our arrival soon, but you know how this goes... only when the stars align.</p>
                        <p>Prepare the sacred spices. This feast will be one for the ages.</p>
                        <p class="text-right mt-6">- The Huntsman</p>`
                },
                sushi: {
                    name: 'Fusion Sushi',
                    description: 'A unique blend of Japanese technique and Nigerian flavors. Price upon request.',
                    image: 'sushi.png',
                    alt: 'Fusion Sushi',
                    letter: `
                        <p class="mb-4">To Chim,</p>
                        <p class="mb-4">The old master in Kyoto finally relented. He has shared the secret techniques, the precise art of the blade and rice. I have paired his ancient wisdom with the fiery spirit of our local spice routes.</p>
                        <p class="mb-4">The result is... something new. A pact between two worlds on a single plate. I am bringing back a very limited quantity of the key ingredients. This cannot be replicated easily.</p>
                        <p>Tell our patrons to prepare their palates for a journey they have never experienced. The consignment is small and will not last.</p>
                        <p class="text-right mt-6">- The Voyager</p>`
                }
            };

            const locationsData = {
                lagos: {
                    name: 'Lagos',
                    image: 'lagos.png',
                    universities: ['University of Lagos (UNILAG)', 'Lagos State University (LASU)', 'Yaba College of Technology (YABATECH)', 'Pan-Atlantic University (PAU)', 'Caleb University', 'National Open University (Lagos)', 'Federal College of Education (Akoka)'],
                    letter: `
                        <p class="mb-4">My journey began in the concrete jungle, a city that never sleeps. I wandered amongst the lands to sneak in the best from the four corners of the earth. My first stop was the University of Lagos, its energy a vibrant pulse. I found willing palates at LASU and YABATECH, their hunger for new flavors insatiable. The scholars at Pan-Atlantic University, Caleb, the National Open University, and the Federal College of Education all welcomed the craft. The city is vast, a sprawling map of taste, and I will continue mapping it to bring this magic to more people.</p>
                        <p class="text-right mt-6">- The Cartographer</p>`
                },
                portharcourt: {
                    name: 'Port Harcourt',
                    image: 'portharcourt.png',
                    universities: ['University of Port Harcourt (UNIPORT)', 'Rivers State University (RSU)', 'Ignatius Ajuru University of Education'],
                    letter: `
                        <p class="mb-4">The Garden City called. I followed the rivers inland, carrying my secrets. I wandered amongst the lands to sneak in the best from the four corners of the earth. My first stop was the University of Port Harcourt, where the air is thick with knowledge and humidity. The bright minds at Rivers State University and the Ignatius Ajuru University of Education proved to be discerning connoisseurs. This city's appetite is strong, and my work here is only just beginning. I will continue mapping this vibrant place to bring the magic to more people.</p>
                        <p class="text-right mt-6">- The Cartographer</p>`
                },
                abuja: {
                    name: 'Abuja',
                    image: 'abuja.png',
                    universities: ['University of Abuja (UNIABUJA)', 'Baze University', 'Nile University of Nigeria', 'African University of Science & Tech', 'National Open University (Abuja)'],
                    letter: `
                        <p class="mb-4">I arrived in the nation's capital, a city of wide roads and grand ambitions. I wandered amongst the lands to sneak in the best from the four corners of the earth. My first stop was the University of Abuja, a place of power and potential. The future leaders at Baze University, Nile University, the African University of Science & Tech, and the National Open University all shared in the experience. This city is a center of influence, and its influence will soon carry the taste of our craft far and wide. I will continue mapping its boulevards to bring the magic to more people.</p>
                        <p class="text-right mt-6">- The Cartographer</p>`
                }
                
            };
            
            const toppingPrice = 1000;
            let cart = [];
            let isSiteDarkMode = localStorage.getItem('siteDarkMode') !== 'false';
initializeDraftEmailModal();
            // --- DOM ELEMENTS ---
            const body = document.body;
            const menuContainer = document.getElementById('menu-items');
            const exoticsContainer = document.getElementById('exotics-container');
            const locationsContainer = document.getElementById('locations-container');
            const orderModal = document.getElementById('order-modal');
            const cartModal = document.getElementById('cart-modal');
            const campusModal = document.getElementById('campus-modal');
            const noteModal = document.getElementById('note-modal');
            const noteContent = document.getElementById('note-content');
            const cartButton = document.getElementById('cart-button');
            const cartCount = document.getElementById('cart-count');
            const cartItemsContainer = document.getElementById('cart-items-container');
            const campusSelectorTrigger = document.getElementById('campus-selector-trigger');
            const selectedCampusText = document.getElementById('selected-campus-text');
            const campusSelectInput = document.getElementById('campus-select-input');
            const campusListContainer = document.getElementById('campus-list-container');
            const buyNowButton = document.getElementById('buy-now-button');
            const header = document.getElementById('header');
            const themeToggle = document.getElementById('theme-toggle');

            // --- FUNCTIONS ---

            function isTouchDevice() {
                return ('ontouchstart' in window) || (navigator.maxTouchPoints > 0);
            }

            function checkFormCompletion() {
    const nameField = document.getElementById('customer-name');
    const phoneField = document.getElementById('customer-phone');
    const pickupField = document.getElementById('pickup-spot');
    const buyNowButton = document.getElementById('buy-now-button');
    
    const hasName = nameField && nameField.value.trim().length > 0;
    const hasPhone = phoneField && phoneField.value.trim().length > 0;
    const hasPickup = pickupField && pickupField.value.trim().length > 0;
    
    // Show buy now button only if all required fields are filled
    if (hasName && hasPhone && hasPickup && buyNowButton) {
        buyNowButton.classList.remove('hidden');
        updateTotal(); // Update the total when showing the button
    } else if (buyNowButton) {
        buyNowButton.classList.add('hidden');
    }
}

            function renderMenu() {
                menuContainer.innerHTML = '';
                for (const key in menuData) {
                    const item = menuData[key];
                    const card = document.createElement('div');
                    card.className = 'menu-card rounded-lg shadow-lg overflow-hidden';
                    card.dataset.item = key;
                    card.innerHTML = `
                        <div class="aspect-2-3">
                           <img src="${item.image}" alt="${item.name}" onerror="this.onerror=null;this.src='https://placehold.co/1024x1536/1a1a1a/333333?text=Image+Coming+Soon';">
                        </div>
                        <div class="p-8 flex-grow flex flex-col">
                            <h3 class="text-2xl font-bold text-white text-center flex-grow flex items-center justify-center">${item.name}</h3>
                        </div>
                    `;
                    menuContainer.appendChild(card);
                }
            }

            function renderExotics() {
                exoticsContainer.innerHTML = '';
                for (const key in exoticsData) {
                    const item = exoticsData[key];
                    const card = document.createElement('div');
                    card.className = 'menu-card exotic-card rounded-lg shadow-lg overflow-hidden';
                    card.dataset.exoticKey = key;
                    card.innerHTML = `
                        <div class="aspect-2-3">
                           <img src="${item.image}" alt="${item.name}" onerror="this.onerror=null;this.src='https://placehold.co/1024x1536/1a1a1a/333333?text=Image+Coming+Soon';">
                        </div>
                        <div class="p-8">
                            <h3 class="text-2xl font-bold mb-2 text-white">${item.name}</h3>
                            <p class="text-gray-300">${item.description}</p>
                        </div>
                    `;
                    exoticsContainer.appendChild(card);
                }
            }
            
            function renderLocations() {
                locationsContainer.innerHTML = '';
                for (const key in locationsData) {
                    const item = locationsData[key];
                    const card = document.createElement('div');
                    card.className = 'menu-card location-card h-80 rounded-lg shadow-lg overflow-hidden';
                    card.style.backgroundImage = `url('${item.image}')`;
                    card.dataset.locationKey = key;
                    card.innerHTML = `
                        <div class="p-8 h-full flex flex-col justify-end relative z-10">
                            <h3 class="text-3xl font-bold text-white text-center">${item.name}</h3>
                        </div>
                    `;
                    locationsContainer.appendChild(card);
                }
            }

            function applyTheme() {
            const headerLogo = document.querySelector('header img');
            const footerLogo = document.querySelector('footer img');
            const signatureImages = document.querySelectorAll('.signature-image'); // Get all signature images
            
            if (isSiteDarkMode) {
                body.classList.remove('light-mode');
                themeToggle.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>`; // Sun icon
                
                // Set dark mode images
                if (headerLogo) headerLogo.src = 'logo.png';
                if (footerLogo) footerLogo.src = 'logo.png';
                signatureImages.forEach(img => img.src = 'whitesig.png'); // ** NEW **

            } else {
                body.classList.add('light-mode');
                themeToggle.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>`; // Moon icon
                
                // Set light mode images
                if (headerLogo) headerLogo.src = 'darklogo.png';
                if (footerLogo) footerLogo.src = 'darklogo.png';
                signatureImages.forEach(img => img.src = 'signature.png'); // ** NEW **
            }
        }
            
            function applyNoteTheme() {
                if (isSiteDarkMode) {
                    noteContent.classList.add('dark');
                    noteContent.classList.remove('light');
                } else {
                    noteContent.classList.remove('dark');
                    noteContent.classList.add('light');
                }
            }

            function openNoteModal(itemKey, type = 'menu') {
            const item = type === 'menu' ? menuData[itemKey] : (type === 'exotic' ? exoticsData[itemKey] : locationsData[itemKey]);
            let buttonHtml = '';

            // ** NEW: Determine which signature to use based on the theme **
            const signatureSrc = isSiteDarkMode ? 'whitesig.png' : 'signature.png';
            const signatureHtml = `<img src="${signatureSrc}" class="h-5 ml-auto" alt="Signature">`;

            if (type === 'menu') {
                buttonHtml = `<button id="experience-now-button" class="blur-button mt-6" data-item="${itemKey}">Experience at Home</button>`;
            } else if (type === 'exotic') {
                buttonHtml = `<a href="#newsletter" id="update-letter-button" class="blur-button mt-6">${isTouchDevice() ? 'Tap' : 'Click'} to Intercept Future Updates</a>`;
            }

            noteContent.innerHTML = `
                <div class="absolute top-2 right-4 flex items-center space-x-2">
                    <button id="close-note-modal" class="text-gray-500 hover:text-black text-3xl">&times;</button>
                </div>
                <div class="font-kalam text-lg leading-relaxed mt-8">${item.letter.replace('{{SIGNATURE}}', signatureHtml)}</div>
                <div class="text-center">${buttonHtml}</div>
            `;
            noteModal.style.display = 'flex';
            applyNoteTheme();
            body.classList.add('modal-open');
        }

            function openOrderModal(itemKey) {
                const item = menuData[itemKey];
                const modalContent = orderModal.querySelector('.modal-content');
                
                let toppingsHtml = item.toppings.length > 0 ? item.toppings.map(topping => `
                    <label class="flex items-center space-x-3 bg-[#2a2a2a] p-3 rounded-lg">
                        <input type="checkbox" class="form-checkbox h-5 w-5 text-red-600 bg-gray-800 border-gray-600 rounded focus:ring-red-500" value="${topping}">
                        <span class="text-gray-300">${topping}</span>
                    </label>
                `).join('') : '<p class="text-gray-400 col-span-2 md:col-span-3">This item is perfect as it is.</p>';

                modalContent.innerHTML = `
                    <button id="close-order-modal" class="absolute top-4 right-4 text-gray-400 hover:text-white text-3xl">&times;</button>
                    <h2 class="font-playfair text-4xl text-white mb-6">Customize ${item.name}</h2>
                    
                    <div class="mb-6">
                        <h3 class="font-bold text-xl mb-3 text-brand-red">Select Size</h3>
                        <div class="flex flex-col md:flex-row gap-4">
                            <label class="flex-1 cursor-pointer">
                                <input type="radio" name="size" value="big" class="peer sr-only" checked />
                                <span class="block text-center p-4 rounded-lg border border-gray-600 hover:border-red-500 peer-checked:bg-red-600 peer-checked:text-white peer-checked:border-red-600">Big</span>
                            </label>
                            <label class="flex-1 cursor-pointer">
                                <input type="radio" name="size" value="bigger" class="peer sr-only" />
                                <span class="block text-center p-4 rounded-lg border border-gray-600 hover:border-red-500 peer-checked:bg-red-600 peer-checked:text-white peer-checked:border-red-600">Bigger</span>
                            </label>
                            <label class="flex-1 cursor-pointer">
                                <input type="radio" name="size" value="biggest" class="peer sr-only" />
                                <span class="block text-center p-4 rounded-lg border border-gray-600 hover:border-red-500 peer-checked:bg-red-600 peer-checked:text-white peer-checked:border-red-600">Biggest</span>
                            </label>
                        </div>
                    </div>

                    <div>
                        <h3 class="font-bold text-xl mb-3 text-brand-red">Select Additions</h3>
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">${toppingsHtml}</div>
                    </div>

                    <button id="add-to-cart-button" class="cta-button w-full font-bold py-4 mt-8 rounded-full text-lg" data-item="${itemKey}">${typeof window.editingCartIndex !== 'undefined' ? 'Update Box' : 'Add to Box'}</button>
                `;
                orderModal.style.display = 'flex';
                body.classList.add('modal-open');
            }

            function closeModal(modal) {
                modal.style.display = 'none';
                body.classList.remove('modal-open');
            }

function addToCart(itemKey) {
    const size = document.querySelector('input[name="size"]:checked').value;
    const selectedToppings = Array.from(document.querySelectorAll('input[type="checkbox"]:checked')).map(cb => cb.value);
    
    const newItem = {
        id: Date.now(),
        key: itemKey,
        name: menuData[itemKey].name,
        size: size,
        toppings: selectedToppings
    };
    
    const wasEditing = typeof window.editingCartIndex !== 'undefined';
    
    // Check if we're editing an existing item
    if (wasEditing) {
        cart[window.editingCartIndex] = newItem;
        delete window.editingCartIndex;
    } else {
        cart.push(newItem);
    }

    updateCart();
    closeModal(orderModal);
    
    // If we were editing, reopen the cart
    if (wasEditing) {
        setTimeout(() => {
            cartModal.style.display = 'flex';
            setTimeout(() => cartModal.classList.add('active'), 10);
            renderCartItems();
            loadDeliveryInfo();
            setupStepByStepForm(); // Add this missing line
            body.classList.add('modal-open');
        }, 300);
    }
}

            function updateCart() {
    cartCount.textContent = cart.length;
    renderCartItems();
    saveDeliveryInfo();
    saveCart(); // Save cart to localStorage
}

  function renderCartItems() {
    if (cart.length === 0) {
        cartItemsContainer.innerHTML = `<p class="text-gray-400 text-center py-8">Your cart is empty.</p>`;
        buyNowButton.textContent = 'BUY NOW';
        buyNowButton.disabled = true;
        return;
    }

    const cartItemsHtml = cart.map((item, index) => `
        <div class="cart-item flex justify-between items-start py-4 border-b border-gray-700" data-index="${index}">
            <div class="flex-grow cursor-pointer">
                <h4 class="font-bold text-lg text-white">${item.name} <span class="text-sm capitalize text-gray-400">(${item.size})</span></h4>
                <p class="text-gray-500 text-sm">${item.toppings.join(', ') || 'No extra additions'}</p>
                <p class="text-xs text-gray-600 mt-1">Tap to edit</p>
            </div>
            <button class="text-gray-500 hover:text-red-500 remove-item-button" data-index="${index}">&times;</button>
        </div>
    `).join('');
    
    const clearButtonHtml = `
        <div class="pt-4 border-t border-gray-600 mt-4">
            <button id="clear-cart-button" class="w-full font-medium py-2 rounded-lg text-gray-400 hover:text-white hover:bg-gray-800 transition-colors text-sm">Clear All Items</button>
        </div>
    `;
    
    cartItemsContainer.innerHTML = cartItemsHtml + clearButtonHtml;
    
    // Don't enable button here - let checkFormCompletion handle it
checkFormCompletion();
}
function saveDeliveryInfo() {
    try {
        const nameField = document.getElementById('customer-name');
        const phoneField = document.getElementById('customer-phone');
        const campusField = document.getElementById('campus-select-input');
        const campusTextElement = document.getElementById('selected-campus-text');
        const pickupField = document.getElementById('pickup-spot');

        const deliveryInfo = {
            name: nameField ? nameField.value : '',
            phone: phoneField ? phoneField.value : '',
            campus: campusField ? campusField.value : '',
            campusText: campusTextElement ? campusTextElement.textContent : '',
            pickupSpot: pickupField ? pickupField.value : ''
        };
        
        localStorage.setItem('pautacos-delivery-info', JSON.stringify(deliveryInfo));
        console.log('✅ Saved delivery info:', deliveryInfo); // Remove after testing
    } catch (e) {
        console.warn('❌ Could not save delivery info to localStorage:', e);
    }
}

function loadDeliveryInfo() {
    const saved = localStorage.getItem('pautacos-delivery-info');
    if (saved) {
        const deliveryInfo = JSON.parse(saved);
        
        // Load values
        document.getElementById('customer-name').value = deliveryInfo.name || '';
        document.getElementById('customer-phone').value = deliveryInfo.phone || '';
        document.getElementById('campus-select-input').value = deliveryInfo.campus || 'No Campus';
        document.getElementById('pickup-spot').value = deliveryInfo.pickupSpot || '';
        
        // Update campus display
        const campusText = deliveryInfo.campusText || 'No Campus';
        const campusTextElement = document.getElementById('selected-campus-text');
        campusTextElement.textContent = campusText;
        
        if (campusText !== '-- Please select a campus --') {
            campusTextElement.classList.remove('text-gray-400');
            if (body.classList.contains('light-mode')) {
                campusTextElement.classList.add('text-black');
            } else {
                campusTextElement.classList.add('text-white');
            }
        }
        
        // Show and complete steps based on filled data
        const nameStep = document.getElementById('name-step');
        const phoneStep = document.getElementById('phone-step');
        const pickupStep = document.getElementById('pickup-step');
        const campusStep = document.getElementById('campus-step');
        
        if (deliveryInfo.name) {
            nameStep.classList.add('completed');
            nameStep.classList.remove('active');
            phoneStep.classList.add('visible');
            
            if (deliveryInfo.phone) {
                phoneStep.classList.add('completed');
                phoneStep.classList.remove('active');
                pickupStep.classList.add('visible');
                
                if (deliveryInfo.pickupSpot) {
                    pickupStep.classList.add('completed');
                    pickupStep.classList.remove('active');
                    campusStep.classList.add('visible');
                    campusStep.classList.add('active');
                } else {
                    pickupStep.classList.add('active');
                }
            } else {
                phoneStep.classList.add('active');
            }
        }
    }
}

function loadDeliveryInfo() {
    const saved = localStorage.getItem('pautacos-delivery-info');
    if (saved) {
        const deliveryInfo = JSON.parse(saved);
        
        // Load values
        document.getElementById('customer-name').value = deliveryInfo.name || '';
        document.getElementById('customer-phone').value = deliveryInfo.phone || '';
        document.getElementById('campus-select-input').value = deliveryInfo.campus || 'No Campus';
        document.getElementById('pickup-spot').value = deliveryInfo.pickupSpot || '';
        
        // Update campus display
        const campusText = deliveryInfo.campusText || 'No Campus';
        const campusTextElement = document.getElementById('selected-campus-text');
        campusTextElement.textContent = campusText;
        
        if (campusText !== '-- Please select a campus --') {
            campusTextElement.classList.remove('text-gray-400');
            if (body.classList.contains('light-mode')) {
                campusTextElement.classList.add('text-black');
            } else {
                campusTextElement.classList.add('text-white');
            }
        }
        
        // Show and complete steps based on filled data
        const nameStep = document.getElementById('name-step');
        const phoneStep = document.getElementById('phone-step');
        const pickupStep = document.getElementById('pickup-step');
        const campusStep = document.getElementById('campus-step');
        
        if (deliveryInfo.name) {
            nameStep.classList.add('completed');
            nameStep.classList.remove('active');
            phoneStep.classList.add('visible');
            
            if (deliveryInfo.phone) {
                phoneStep.classList.add('completed');
                phoneStep.classList.remove('active');
                pickupStep.classList.add('visible');
                
                if (deliveryInfo.pickupSpot) {
                    pickupStep.classList.add('completed');
                    pickupStep.classList.remove('active');
                    campusStep.classList.add('visible');
                    campusStep.classList.add('active');
                } else {
                    pickupStep.classList.add('active');
                }
            } else {
                phoneStep.classList.add('active');
            }
        }
    }
    
    // Check if form is complete after loading
    setTimeout(checkFormCompletion, 100);
}

// Enhanced save functions with error handling
function saveCart() {
    try {
        localStorage.setItem('pautacos-cart', JSON.stringify(cart));
    } catch (e) {
        console.warn('Could not save cart to localStorage:', e);
    }
}

// Enhanced save delivery info with real-time updates
function saveDeliveryInfo() {
    try {
        const nameField = document.getElementById('customer-name');
        const phoneField = document.getElementById('customer-phone');
        const campusField = document.getElementById('campus-select-input');
        const campusTextElement = document.getElementById('selected-campus-text');
        const pickupField = document.getElementById('pickup-spot');

        const deliveryInfo = {
            name: nameField ? nameField.value : '',
            phone: phoneField ? phoneField.value : '',
            campus: campusField ? campusField.value : '',
            campusText: campusTextElement ? campusTextElement.textContent : '',
            pickupSpot: pickupField ? pickupField.value : ''
        };
        
        localStorage.setItem('pautacos-delivery-info', JSON.stringify(deliveryInfo));
    } catch (e) {
        console.warn('Could not save delivery info to localStorage:', e);
    }
}

// Load cart from localStorage
function loadCart() {
    const savedCart = localStorage.getItem('pautacos-cart');
    if (savedCart) {
        try {
            cart = JSON.parse(savedCart);
            updateCart();
        } catch (e) {
            console.error('Error loading cart from localStorage:', e);
            cart = [];
        }
    }
}

// Clear cart from localStorage
function clearCart() {
    cart = [];
    localStorage.removeItem('pautacos-cart');
    updateCart();
}
// Edit cart item function
function editCartItem(index) {
    const item = cart[index];
    window.editingCartIndex = index;
    
    // Close cart modal first
    saveDeliveryInfo();
    cartModal.classList.remove('active');
    setTimeout(() => {
        closeModal(cartModal);
        body.classList.remove('cart-open');
    }, 300);
    
    // Open order modal after cart closes
    setTimeout(() => {
        openOrderModal(item.key);
        
        // Pre-select size and toppings after modal opens
        setTimeout(() => {
            const sizeRadio = document.querySelector(`input[name="size"][value="${item.size}"]`);
            if (sizeRadio) sizeRadio.checked = true;
            
            item.toppings.forEach(topping => {
                const toppingCheckbox = document.querySelector(`input[type="checkbox"][value="${topping}"]`);
                if (toppingCheckbox) toppingCheckbox.checked = true;
            });
        }, 100);
    }, 400);
}
            
            function removeFromCart(index) {
    cart.splice(index, 1);
    updateCart();
    saveCart(); // Save after removal
}

function updateTotal() {
    let total = 0;
    cart.forEach(item => {
        total += menuData[item.key].prices[item.size];
        total += item.toppings.length * toppingPrice;
    });
    
    const buyNowButton = document.getElementById('buy-now-button');
    if (buyNowButton && !buyNowButton.classList.contains('hidden')) {
        buyNowButton.textContent = `BUY NOW (₦${total.toLocaleString()})`;
    }
}
            // Draft Email Functionality
function initializeDraftEmailModal() {
    const draftEmailBtn = document.getElementById('draft-email-btn');
    const modal = document.getElementById('draft-email-modal');
    const closeModalBtn = document.getElementById('close-draft-modal-btn');
    const emailNameField = document.getElementById('email-name');
    const emailEmailField = document.getElementById('email-email');
    const emailPhoneField = document.getElementById('email-phone');
    const emailMessageField = document.getElementById('email-message');
    const emailNameFieldContainer = document.getElementById('email-name-field');
    const emailEmailFieldContainer = document.getElementById('email-email-field');
    const emailPhoneFieldContainer = document.getElementById('email-phone-field');
    const emailMessageFieldContainer = document.getElementById('email-message-field');
    const emailUrgencyFieldContainer = document.getElementById('email-urgency-field');
    const emailSubmitFieldContainer = document.getElementById('email-submit-field');
    const draftEmailSubmitBtn = document.getElementById('draft-email-submit-btn');
    const phoneError = document.getElementById('phone-error');
    const urgencyOptions = document.querySelectorAll('.urgency-option');
    let selectedUrgency = '';

    if (!draftEmailBtn || !modal || !closeModalBtn) return;

    function showField(fieldContainer) {
        if (fieldContainer) fieldContainer.classList.add('active');
    }

    function hideField(fieldContainer) {
        if (fieldContainer) fieldContainer.classList.remove('active');
    }

    function isValidEmail(email) { return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email); }
    function isValidPhone(phone) { return phone.replace(/\D/g, '').length >= 10; }

    urgencyOptions.forEach(option => {
        option.addEventListener('click', function() {
            urgencyOptions.forEach(opt => opt.classList.remove('border-white', 'bg-gray-800'));
            this.classList.add('border-white', 'bg-gray-800');
            selectedUrgency = this.getAttribute('data-urgency');
            checkFormCompletion();
        });
    });

    function checkFormCompletion() {
        if (emailNameField.value.trim().length > 2 &&
            isValidEmail(emailEmailField.value.trim()) &&
            isValidPhone(emailPhoneField.value.trim()) &&
            emailMessageField.value.trim().length > 10 &&
            selectedUrgency) {
            showField(emailSubmitFieldContainer);
        } else {
            hideField(emailSubmitFieldContainer);
        }
    }

    draftEmailBtn.addEventListener('click', (e) => {
        e.preventDefault();
        modal.classList.remove('hidden');
        body.classList.add('modal-open');
    });

    function closeModal() {
        modal.classList.add('hidden');
        body.classList.remove('modal-open');
        document.getElementById('email-draft-form').reset();
        hideField(emailEmailFieldContainer);
        hideField(emailPhoneFieldContainer);
        hideField(emailMessageFieldContainer);
        hideField(emailUrgencyFieldContainer);
        hideField(emailSubmitFieldContainer);
        urgencyOptions.forEach(opt => opt.classList.remove('border-white', 'bg-gray-800'));
        selectedUrgency = '';
    }

    closeModalBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => e.target === modal && closeModal());

    function setupFieldListener(field, condition, nextField) {
        const allNextFields = [emailEmailFieldContainer, emailPhoneFieldContainer, emailMessageFieldContainer, emailUrgencyFieldContainer, emailSubmitFieldContainer];
        const nextFieldIndex = allNextFields.indexOf(nextField);
        
        field.addEventListener('input', () => {
            if (condition(field.value.trim())) {
                showField(nextField);
            } else {
                for (let i = nextFieldIndex; i < allNextFields.length; i++) {
                    hideField(allNextFields[i]);
                    const input = allNextFields[i].querySelector('input, textarea');
                    if(input) input.value = '';
                }
                urgencyOptions.forEach(opt => opt.classList.remove('border-white', 'bg-gray-800'));
                selectedUrgency = '';
            }
            checkFormCompletion();
        });
    }

    setupFieldListener(emailNameField, val => val.length > 2, emailEmailFieldContainer);
    setupFieldListener(emailEmailField, val => isValidEmail(val), emailPhoneFieldContainer);
    setupFieldListener(emailPhoneField, val => isValidPhone(val), emailMessageFieldContainer);
    setupFieldListener(emailMessageField, val => val.length > 10, emailUrgencyFieldContainer);
    
    emailPhoneField.addEventListener('input', () => {
        const isValid = isValidPhone(emailPhoneField.value.trim());
        phoneError.classList.toggle('hidden', isValid || emailPhoneField.value.trim().length === 0);
    });

    if (draftEmailSubmitBtn) {
        draftEmailSubmitBtn.addEventListener('click', (e) => {
            e.preventDefault();
            
            checkFormCompletion();
            if(emailSubmitFieldContainer.classList.contains('active') === false) return;

            const subject = `${selectedUrgency} from ${emailNameField.value.trim()}`;
            const body = `Hello,\n\nI am writing to you with the following message:\n\n${emailMessageField.value.trim()}\n\nPlease feel free to contact me:\nEmail: ${emailEmailField.value.trim()}\nPhone: ${emailPhoneField.value.trim()}\n\nNature of this email: ${selectedUrgency}\n\nBest regards,\n${emailNameField.value.trim()}`;
            const mailtoLink = `mailto:frontman@pautacos.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            
            window.open(mailtoLink, '_self');
            setTimeout(closeModal, 500);
        });
    }
}

            function renderCampusList() {
    campusListContainer.innerHTML = '';
    
    // Add "No Campus" option first
    const noCampusHeader = document.createElement('h3');
    noCampusHeader.className = 'font-bold text-xl text-brand-red mt-0';
    noCampusHeader.textContent = 'General';
    campusListContainer.appendChild(noCampusHeader);
    
    const noCampusItem = document.createElement('div');
    noCampusItem.className = 'p-3 rounded-lg hover:bg-[#2a2a2a] cursor-pointer text-gray-300';
    noCampusItem.textContent = 'No Campus';
    noCampusItem.dataset.campus = 'No Campus';
    campusListContainer.appendChild(noCampusItem);
    
    // Add existing locations
    for (const key in locationsData) {
        const location = locationsData[key];
        const cityHeader = document.createElement('h3');
        cityHeader.className = 'font-bold text-xl text-brand-red mt-4';
        cityHeader.textContent = location.name;
        campusListContainer.appendChild(cityHeader);

        const cityList = document.createElement('div');
        cityList.className = 'grid grid-cols-1 gap-2 mt-2';
        
        location.universities.forEach(campus => {
            const campusItem = document.createElement('div');
            campusItem.className = 'p-3 rounded-lg hover:bg-[#2a2a2a] cursor-pointer text-gray-300';
            campusItem.textContent = campus;
            campusItem.dataset.campus = campus;
            cityList.appendChild(campusItem);
        });
        campusListContainer.appendChild(cityList);
    }
}

function setupStepByStepForm() {
    const nameInput = document.getElementById('customer-name');
    const phoneInput = document.getElementById('customer-phone');
    const pickupInput = document.getElementById('pickup-spot');
    
    const nameStep = document.getElementById('name-step');
    const phoneStep = document.getElementById('phone-step');
    const pickupStep = document.getElementById('pickup-step');
    const campusStep = document.getElementById('campus-step');
    
    function showNextStep(currentStep, nextStep, currentInput) {
        // Mark current step as completed
        currentStep.classList.remove('active');
        currentStep.classList.add('completed');
        
        // Show and activate next step
        setTimeout(() => {
            nextStep.classList.add('visible');
            setTimeout(() => {
                nextStep.classList.add('active');
                const input = nextStep.querySelector('input, textarea');
                if (input) input.focus();
                checkFormCompletion(); // Check if form is complete
            }, 150);
        }, 100);
    }
    
    nameInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && nameInput.value.trim().length > 0) {
            saveDeliveryInfo();
            showNextStep(nameStep, phoneStep, nameInput);
        }
    });
    
    phoneInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && phoneInput.value.trim().length > 0) {
            saveDeliveryInfo();
            showNextStep(phoneStep, pickupStep, phoneInput);
        }
    });
    
    pickupInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
            saveDeliveryInfo();
            checkFormCompletion(); // Check completion after pickup is entered
            showNextStep(pickupStep, campusStep, pickupInput);
        }
    });
    
    // Allow clicking on completed fields to reactivate them
    [nameStep, phoneStep, pickupStep].forEach((step, index) => {
        step.addEventListener('click', (e) => {
            if (step.classList.contains('completed')) {
                // Remove active from all steps
                [nameStep, phoneStep, pickupStep, campusStep].forEach(s => s.classList.remove('active'));
                // Activate clicked step
                step.classList.remove('completed');
                step.classList.add('active');
                const input = step.querySelector('input, textarea');
                if (input) input.focus();
            }
        });
    });
    
    // Auto-save and check completion on input changes
    [nameInput, phoneInput, pickupInput].forEach(input => {
        if (input) {
            // Remove existing listeners to prevent duplicates
            input.removeEventListener('input', handleInputChange);
            input.removeEventListener('blur', handleInputChange);
            input.removeEventListener('change', handleInputChange);
            
            // Add comprehensive listeners
            input.addEventListener('input', handleInputChange);
            input.addEventListener('blur', handleInputChange);
            input.addEventListener('change', handleInputChange);
        }
    });
    
    function handleInputChange() {
        saveDeliveryInfo();
        checkFormCompletion();
    }
    
    // Initial check when form is set up
    checkFormCompletion();
}
            
            // --- EVENT LISTENERS ---
            renderMenu();
            renderExotics();
            renderLocations();
            renderCampusList();
            applyTheme();
            loadCart(); // Load saved cart on page load

            menuContainer.addEventListener('click', (e) => {
                const card = e.target.closest('.menu-card');
                if (card) {
                    openNoteModal(card.dataset.item, 'menu');
                }
            });
            
            locationsContainer.addEventListener('click', (e) => {
                const card = e.target.closest('.location-card');
                if (card) {
                    openNoteModal(card.dataset.locationKey, 'location');
                }
            });

            orderModal.addEventListener('click', (e) => {
                if (e.target.matches('.modal-backdrop') || e.target.id === 'close-order-modal') {
                    closeModal(orderModal);
                }
                if (e.target.id === 'add-to-cart-button') {
                    addToCart(e.target.dataset.item);
                }
            });

cartButton.addEventListener('click', () => {
    cartModal.style.display = 'flex';
    setTimeout(() => cartModal.classList.add('active'), 10);
    renderCartItems();
    loadDeliveryInfo();
    setupStepByStepForm();
    body.classList.add('modal-open');
});

    cartModal.addEventListener('click', (e) => {
    if (e.target.matches('.modal-backdrop') || e.target.id === 'close-cart-modal') {
        saveDeliveryInfo();
        cartModal.classList.remove('active');
        setTimeout(() => closeModal(cartModal), 300);
    }
    if (e.target.matches('.remove-item-button')) {
        e.stopPropagation();
        removeFromCart(e.target.dataset.index);
    }
    // Add cart item editing
    if (e.target.closest('.cart-item') && !e.target.matches('.remove-item-button')) {
        const index = parseInt(e.target.closest('.cart-item').dataset.index);
        editCartItem(index);
    }
});

// Clear cart button functionality
document.addEventListener('click', (e) => {
    if (e.target.id === 'clear-cart-button') {
        if (confirm('Are you sure you want to clear all items from your cart?')) {
            clearCart();
        }
    }
});

// Setup delivery info auto-save - call this every time cart opens
function setupDeliveryInfoSaving() {
    const fields = ['customer-name', 'customer-phone', 'pickup-spot'];
    
    fields.forEach(id => {
        const element = document.getElementById(id);
        if (element) {
            // Remove any existing listeners to prevent duplicates
            element.removeEventListener('input', saveDeliveryInfo);
            element.removeEventListener('blur', saveDeliveryInfo);
            
            // Add new listeners for real-time saving
            element.addEventListener('input', saveDeliveryInfo);
            element.addEventListener('blur', saveDeliveryInfo);
        }
    });
}
            
            campusSelectorTrigger.addEventListener('click', () => {
                campusModal.style.display = 'flex';
                body.classList.add('modal-open');
            });

            campusModal.addEventListener('click', (e) => {
                if (e.target.matches('.modal-backdrop') || e.target.id === 'close-campus-modal') {
                    closeModal(campusModal);
                }
            });

            campusListContainer.addEventListener('click', (e) => {
    if (e.target.dataset.campus) {
        const campusName = e.target.dataset.campus;
        selectedCampusText.textContent = campusName;
        selectedCampusText.classList.remove('text-gray-400');
        
        // Add appropriate text color based on current theme
        if (body.classList.contains('light-mode')) {
            selectedCampusText.classList.remove('text-white');
            selectedCampusText.classList.add('text-black');
        } else {
            selectedCampusText.classList.remove('text-black');
            selectedCampusText.classList.add('text-white');
        }
        
        campusSelectInput.value = campusName;
        saveDeliveryInfo();
        closeModal(campusModal);
    }
});

            exoticsContainer.addEventListener('click', (e) => {
                const card = e.target.closest('.exotic-card');
                if (card) {
                    openNoteModal(card.dataset.exoticKey, 'exotic');
                }
            });
            
            noteModal.addEventListener('click', (e) => {
                 if (e.target.matches('.modal-backdrop') || e.target.id === 'close-note-modal') {
                    closeModal(noteModal);
                }
                if(e.target.id === 'experience-now-button') {
                    closeModal(noteModal);
                    openOrderModal(e.target.dataset.item);
                }
                if(e.target.id === 'update-letter-button') {
    closeModal(noteModal);
    // Scroll delegation: delivery section scrolls cart items on mobile
if (window.innerWidth <= 768) {
    const deliverySection = document.querySelector('.cart-modal-content > div:last-child');
    const cartItemsContainer = document.getElementById('cart-items-container');
    
    if (deliverySection && cartItemsContainer) {
        deliverySection.addEventListener('wheel', (e) => {
            // If cart items can scroll, delegate the scroll there
            if (cartItemsContainer.scrollHeight > cartItemsContainer.clientHeight) {
                e.preventDefault();
                cartItemsContainer.scrollTop += e.deltaY;
            }
        }, { passive: false });
        
        // Handle touch scrolling on mobile
        let startY = 0;
        deliverySection.addEventListener('touchstart', (e) => {
            startY = e.touches[0].clientY;
        });
        
        deliverySection.addEventListener('touchmove', (e) => {
            const currentY = e.touches[0].clientY;
            const diff = startY - currentY;
            
            if (cartItemsContainer.scrollHeight > cartItemsContainer.clientHeight) {
                e.preventDefault();
                cartItemsContainer.scrollTop += diff;
                startY = currentY;
            }
        }, { passive: false });
    }
}
    // Scroll to newsletter section
    const newsletterSection = document.querySelector('footer');
    if (newsletterSection) {
        newsletterSection.scrollIntoView({ 
            behavior: 'smooth',
            block: 'center'
        });
    }
    
    // Wait a bit for scroll and form to load, then focus first input
    setTimeout(() => {
        // Try to find the Sender form input field
        const senderInput = document.querySelector('.sender-form-field input[type="email"], .sender-form-field input[type="text"]');
        if (senderInput) {
            senderInput.focus();
            senderInput.select(); // This will also select any existing text
        } else {
            // Fallback: try to find any input in the newsletter area
            const fallbackInput = document.querySelector('footer input[type="email"], footer input[type="text"]');
            if (fallbackInput) {
                fallbackInput.focus();
                fallbackInput.select();
            }
        }
    }, 1000); // Wait 1 second for the Sender widget to fully load
}
            });

            themeToggle.addEventListener('click', () => {
                isSiteDarkMode = !isSiteDarkMode;
                localStorage.setItem('siteDarkMode', isSiteDarkMode);
                applyTheme();
            });

            cartItemsContainer.addEventListener('DOMSubtreeModified', updateTotal);
            
            window.addEventListener('scroll', () => {
                if (header) {
                    header.classList.toggle('scrolled', window.scrollY > 50);
                }
            });
        });
    </script>
</body>
</html>